<update-meta name="title" content="YAIO - D'Artagnan - Searcher"></update-meta>
<update-meta name="description" content="YAIO - D'Artagnan - Searcher"></update-meta>

<div class='box box-portdesc add2toc-h1 box-portdesc-explorer' toclabel='Explorer' id='box_explorer'>
  <div class='boxline boxline-ue2 h2-portdesc h2-portdesc-explorer' id='ue_explorer'>
      <div id="containerMasterUe">YAIO - D'Artagnan - Searcher</div>
      <div id="containerCurrentSource" ng-include="yaioUtils.getConfig().resBaseUrl + 'js/sourceselector/current-source-main.html'"></div>
      <div id="containerInfoCommands">
          <div ng-include="yaioUtils.getConfig().resBaseUrl + 'js/search/menu-main.html'"></div>
      </div>
  </div>
  <div class='togglecontainer togglecontainer-list' id='details_list'>
  </div>
</div>
                
<div class='container-yaio-current' toclabel='Daten' id='box_data'>
    <div id="containerYaioSearch" class="box container-yaio-search">
        <!-- 
        *****************************
        *****************************
        * Current SearchOptions
        *****************************
        *****************************
         -->
        <div id="searchcommand" class="container-searchcommands"><!--
       --><div class="fulltextline" data-tooltip='tooltip.command.DoSearch' lang="tech">
             <input type="text" ng-keyup="checkEnterFulltextSearch($event);" placeholder="Suchtext" name="fulltext" maxsize="40" class="inputtype_text" id="inputSearchOptionsFulltext" ng-model="searchOptions.fulltext">
             <select name="searchSort" class="inputtype_select" id="inputSearchOptionsSearchSortt" ng-model="searchOptions.searchSort">
                  <option value="default" translate="common.select.searchSort.default">default</option>
                  <option value="createdUp" translate="common.select.searchSort.createdUp">createdUp</option>
                  <option value="createdDown" translate="common.select.searchSort.createdDown">createdDown</option>
                  <option value="istEndeUp" translate="common.select.searchSort.istEndeUp">istEndeUp</option>
                  <option value="istEndeDown" translate="common.select.searchSort.istEndeDown">istEndeDown</option>
                  <option value="istStartUp" translate="common.select.searchSort.istStartUp">istStartUp</option>
                  <option value="istStartDown" translate="common.select.searchSort.istStartDown">istStartDown</option>
                  <option value="lastChangeUp" translate="common.select.searchSort.lastChangeUp">lastChangeUp</option>
                  <option value="lastChangeDown" translate="common.select.searchSort.lastChangeDown">lastChangeDown</option>
                  <option value="nameUp" translate="common.select.searchSort.nameUp">nameUp</option>
                  <option value="nameDown" translate="common.select.searchSort.nameDown">nameDown</option>
                  <option value="nodeNumberUp" translate="common.select.searchSort.nodeNumberUp">nodeNumberUp</option>
                  <option value="nodeNumberDown" translate="common.select.searchSort.nodeNumberDown">nodeNumberDown</option>
                  <option value="planEndeUp" translate="common.select.searchSort.planEndeUp">planEndeUp</option>
                  <option value="planEndeDown" translate="common.select.searchSort.planEndeDown">planEndeDown</option>
                  <option value="planStartUp" translate="common.select.searchSort.planStartUp">planStartUp</option>
                  <option value="planStartDown" translate="common.select.searchSort.planStartDown">planStartDown</option>
                  <option value="planChildrenSumEndeUp" translate="common.select.searchSort.planChildrenSumEndeUp">planChildrenSumEndeUp</option>
                  <option value="planChildrenSumEndeDown" translate="common.select.searchSort.planChildrenSumEndeDown">planChildrenSumEndeDown</option>
                  <option value="planChildrenSumStartUp" translate="common.select.searchSort.planChildrenSumStartUp">planChildrenSumStartUp</option>
                  <option value="planChildrenSumStartDown" translate="common.select.searchSort.planChildrenSumStartDown">planChildrenSumStartDown</option>
                  <option value="typeUp" translate="common.select.searchSort.typeUp">typeUp</option>
                  <option value="typeDown" translate="common.select.searchSort.typeDown">typeDown</option>
                  <option value="workflowStateUp" translate="common.select.searchSort.workflowStateUp">workflowStateUp</option>
                  <option value="workflowStateDown" translate="common.select.searchSort.workflowStateDown">workflowStateDown</option>
             </select>
             <a ng-click="doNewFulltextSearch();" class="button" translate="common.command.DoSearch">Search</a>
             {{ searchOptions.total }} Treffer  
          </div><!-- 
       --><paging
            class="small"
            page="searchOptions.curPage" 
            page-size="searchOptions.pageSize" 
            total="searchOptions.total"
            adjacent="2"
            dots="..."
            scroll-top="true" 
            hide-if-empty="true"
            ul-class="pagination"
            active-class="active"
            disabled-class="disabled"
            show-prev-next="true"
            paging-action="nextPageAct('Paging Clicked', page)">
          </paging><!--  
     -->
          <br>
          <div class="fulltextline" data-tooltip='tooltip.command.DoSearch' lang="tech">
             <span lang='tech' translate="editor.common.label.type">Typ</span>
             <select name="strClassFilter" class="inputtype_select use_select2 inputtype_select_class" id="inputSearchOptionsStrClassFilter" ng-model="searchOptions.arrClassFilter" multiple="multiple">
                  <option value="" translate="common.select.all">Alle
                  <option translate="common.select.className.TaskNode" value="TaskNode">Task
                  <option translate="common.select.className.EventNode" value="EventNode">Event
                  <option translate="common.select.className.InfoNode" value="InfoNode">Info
                  <option translate="common.select.className.UrlResNode" value="UrlResNode">UrlRes
                  <option translate="common.select.className.SymLinkNode" value="SymLinkNode">Symlink
             </select>
             <span lang='tech' translate="editor.common.label.state">Status</span>
             <select name="strWorkflowStateFilter" class="inputtype_select use_select2 inputtype_select_state" id="inputSearchOptionsStrWorkflowStateFilter" ng-model="searchOptions.arrWorkflowStateFilter" multiple="multiple">
                  <option value="" translate="common.select.all">Alle
                  <option value="NOTPLANED" translate="common.select.TaskNodeType.UNKNOWN">Ungeplant
                  <option value="OPEN" translate="common.select.TaskNodeType.OFFEN">Offen
                  <option value="LATE" translate="common.select.TaskNodeType.LATE">Start verspätet
                  <option value="RUNNING" translate="common.select.TaskNodeType.RUNNING">in Bearbeitung
                  <option value="WARNING" translate="common.select.TaskNodeType.WARNING">Ende überschritten
                  <option value="DONE" translate="common.select.TaskNodeType.ERLEDIGT">Erledigt
                  <option value="CANCELED" translate="common.select.TaskNodeType.VERWORFEN">Verworfen
             </select>
             <span lang='tech' translate="editor.common.label.notPraefix">Not Praefix</span>
             <input type="text" placeholder="Blacklisted" name="strNotNodePraefix" maxsize="40" class="inputtype_text" id="inputSearchOptionsStrNotNodePraefix" ng-model="searchOptions.strNotNodePraefix">
          </div>
        </div>

          <!-- 
          *****************************
          *****************************
          * Current SearchResult
          *****************************
          *****************************
          -->
          <table id="masterTable" class="fancytree-ext-table">
              <!-- define columngroups -->
              <colgroup>
              <col class="container_field fieldtype_name field_name"></col>
              <col class="block_nodedata"></col>
              <col class="block_nodegantt"></col>
              <col class="container_field fieldtype_actions"></col>
              </colgroup>
              <thead>
                <tr id="tab_header"> 
                  <th id="tab_name_haeder">
                    <!-- show name-header and data-toggler -->
                    <span  translate="fancytree.table.headline.name">Name</span>
                    <span style="display: inline-block; width: 300px;" data-tooltip='tooltip.command.ShowGanttData' lang="tech">
                      <a onclick="yaioAppBase.get('YaioNodeGanttRenderer').showGanttView();return false;" id="tabTogglerGantt" class="button tabToggler" translate="fancytree.table.headline.tabTogglerGantt">Zeige Gantt</a>
                      <a onclick="yaioAppBase.get('YaioNodeDataRenderer').showDataView();return false;" id="tabTogglerData" class="button tabToggler"  translate="fancytree.table.headline.tabTogglerData" style="display: none">Zeige Daten</a>
                    </span>
                    </th>
                  <th class="block_nodedata">
                    <!-- show workflow-header -->
                    <div class="container_data_row">
                      <div class="container_field fieldtype_basedata fieldtype_metanummer field_metanummer field_center" translate="fancytree.table.headline.metanummer">Nr.<br />&nbsp;</div>
                      <div class="container_field fieldtype_basedata fieldtype_type field_type field_center" translate="fancytree.table.headline.type">Typ<br />&nbsp;</div>
                      <div class="container_field fieldtype_additionaldata fieldtype_stand field_istChildrenSumStand field_center" translate="fancytree.table.headline.istChildrenSumStand">Ist<br />Stand</div>
                      <div class="container_field fieldtype_additionaldata fieldtype_aufwand field_istChildrenSumAufwand field_center" translate="fancytree.table.headline.istChildrenSumAufwand"> <br />Aufwand</div>
                      <div class="container_field fieldtype_additionaldata fieldtype_fromto field_istChildrenSum field_center" translate="fancytree.table.headline.istChildrenSum"> <br />Zeitraum</div>
                      <div class="container_field fieldtype_additionaldata fieldtype_aufwand field_planChildrenSumAufwand field_center" translate="fancytree.table.headline.planChildrenSumAufwand">Plan<br />Aufwand</div>
                      <div class="container_field fieldtype_additionaldata fieldtype_fromto field_planChildrenSum field_center" translate="fancytree.table.headline.planChildrenSum"> <br />Zeitraum</div>
                      <div class="container_field fieldtype_additionaldata fieldtype_descToggler">
                         <br />
                         <a lang="tech" data-tooltip='tooltip.command.ToggleDescAll' id="toggler_desc_all" onclick="yaioAppBase.get('YaioExplorerCommands').toggleAllNodeDescContainer(); return false;" href="#" class="toggler_hidden"></a>
                      </div>
                    </div></th>
                  <th class="block_nodegantt">
                    <!-- show gantt-header -->
                    <div class="gantt_container"  id="gantt_container_head">
                       <div class="gantt_aufwand" id="gantt_aufwand_head"  translate="fancytree.table.headline.ganttaufwand">Aufwand</div>
                       <div class="gantt_bar"  id="gantt_bar_head" data-tooltip='tooltip.command.GanttRange' lang="tech">
                        <input type="text" placeholder="dd.mm.jjjj" name="ganttRangeStart" pattern="\d{2}\.\d{2}\.\d{4}"  maxsize="10" value="{{ yaioUtils.ganttOptions.ganttRangeStart }}" class="inputtype_date" id="inputGanttRangeStart" ng-model="yaioUtils.ganttOptions.ganttRangeStart" ng-change="recalcGanttBlocks()">
                        <a ng-click="recalcGanttBlocks();" class="button" translate="fancytree.table.headline.ganttrange">Zeitbereich</a> 
                        <input type="text" placeholder="dd.mm.jjjj" name="ganttRangeEnde" pattern="\d{2}\.\d{2}\.\d{4}"  maxsize="10" value="{{ yaioUtils.ganttOptions.ganttRangeEnd }}" class="inputtype_date" style="text-align: right" id="inputGanttRangeEnde" ng-model="yaioUtils.ganttOptions.ganttRangeEnd" ng-change="recalcGanttBlocks()">
                       </div>
                    </div>
                  </th>
                  <th>
                    <!-- show actions-header -->
                    <span translate="fancytree.table.headline.actions"></span>
                    <br />
                    <div class="fieldtype_sysToggler">
                      <a lang="tech" data-tooltip='tooltip.command.ToggleSysAll' id="toggler_sys_all" 
                         onclick="yaioAppBase.get('YaioExplorerCommands').toggleAllNodeSysContainer(); return false;"
                         href="#" class="toggler_hidden"
                         ng-if="yaioUtils.getService('YaioAccessManager').getAvailiableNodeAction('showsysdata', null, true)"></a>
                    </div>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="node in nodes | filter:search" id="tr{{node.sysUID}}" data-value="{{node.sysUID}}" class="">
                  <td>
                      <span class="fancytree-expander" style="background: none"><a href="#/show/{{searchOptions.baseSysUID}}/activate/{{node.sysUID}}/" class="yaio-icon-open"></a></span>
                      <span class="fancytree-checkbox"></span>
                      <span class="fancytree-title fancytree-title-list"></span>
                  </td>
                  <td ng-init="renderNodeLine(node)"/>
                  <td />
                  <td class="container_field fieldtype_actions" >
                    <div class='fieldtype_sysToggler'>
                        <a ng-click="yaioUtils.toggleSysContainerForNode(node);"
                           ng-if="yaioUtils.getService('YaioAccessManager').getAvailiableNodeAction('showsysdata', node.sysUID, true)"
                           id="toggler_sys_{{node.sysUID }}"
                           class="" data-tooltip="tooltip.command.ToggleSys" lang="tech"></a>
                     </div>
                  </td>
                </tr>
              </tbody>
          </table>
    </div>
</div>

<script type="text/javascript">
    // activate elements after 1 second
    setTimeout(function() { 
        // activate speech recognition
        yaioAppBase.get('YaioLayout').addSpeechRecognitionToElements();
        yaioAppBase.get('YaioLayout').addDatePickerToElements();
        yaioAppBase.get('YaioLayout').addDocLayoutStyleSelectorToElements();


        //add resize event
        $( window ).resize(function() {
                yaioAppBase.get('YaioLayout').setupAppSize();
        });    
        $( window ).scroll(function() {
            yaioAppBase.get('YaioLayout').setupAppSize();
        });
        $('.use_select2').select2();

    }, 1000);
    
</script>
